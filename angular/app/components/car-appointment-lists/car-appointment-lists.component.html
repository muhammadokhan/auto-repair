<section class="content-header">
  <h1>Appointments</h1>
  <ol class="breadcrumb">
    <li class="active">Home</li>
  </ol>
</section>
<section class="content">
  <div class="row">
    <div class="col-lg-12">
      <div class="box box-info">
        <div class="box-header with-border">
          <h3 class="box-title">All Appointments</h3>
          <div class="box-tools pull-right">
            <input type="checkbox" ng-model="vm.filter" ng-click="vm.doFilter()"/> Show/Hide Closed Appointments
          </div>
        </div>
        
        <div class="box-body table-responsive">
          <table class="table table-hover">
            <tr>
              <th>NO</th>
              <th>Customer</th>
              <th>Date</th>
              <th>Time</th>
              <th>Status</th>
              <th>Service Advisor</th>
              <th>Service Mechanic</th>
              <th>Service Report</th>
              <th>Receiving Form</th>
              <th>Booking</th>
            </tr>
            
            <tr ng-show="(appointment.status!='Closed' && vm.filter==true) || (vm.filter==false)?true:false" ng-repeat="appointment in vm.appointments" style="cursor: pointer">
              <td ui-sref="app.carappointmentdetail({appointmentId: {{appointment.id}}})">{{appointment.id}}</td>
              <td ui-sref="app.carappointmentdetail({appointmentId: {{appointment.id}}})">{{appointment.name}} </td>
              <td ui-sref="app.carappointmentdetail({appointmentId: {{appointment.id}}})">{{appointment.book_time1}}</td>
              <td ui-sref="app.carappointmentdetail({appointmentId: {{appointment.id}}})">{{appointment.book_time2}}</td>
              <td ui-sref="app.carappointmentdetail({appointmentId: {{appointment.id}}})">{{appointment.status}}</td>
              <td ui-sref="app.carappointmentdetail({appointmentId: {{appointment.id}}})">
              	<div ng-if="appointment.advisor != 0">{{appointment.advisor}}</div>
              </td>
              <td ui-sref="app.carappointmentdetail({appointmentId: {{appointment.id}}})">
                <div ng-if="appointment.mechanic != 0">{{appointment.mechanic}}</div>
              </td>
              <td>
                <a ng-if="appointment.report_id != 0 && appointment.status != 'Report'" ui-sref="special.reportform({reportSlug: 'digitalreport'+{{appointment.report_id}}})">View Report</a>
                <a ng-if="appointment.report_id != 0 && appointment.status == 'Report'" ui-sref="app.reportform({reportId: {{appointment.report_id}}})">View Mechanic Report</a>
              </td>
              <td>
                <a ng-if="appointment.form_id != 0" ui-sref="special.acceptform({formId: {{appointment.form_id}}})">View Form</a></td>
              </td>
              <td>{{appointment.booking_type}}</td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </div>
</section>
